{"version":3,"file":"service-worker.js","sources":["../service-worker.js"],"sourcesContent":["var GHPATH = \"/OS-DPI\";\r\nvar APP_PREFIX = \"osdpi_\";\r\nvar VERSION = APP_VERSION;\r\nvar URLS = [\r\n  `${GHPATH}/`,\r\n  `${GHPATH}/index.html`,\r\n  `${GHPATH}/index.css`,\r\n  `${GHPATH}/index.js`,\r\n  `${GHPATH}/xlsx.js`,\r\n  `${GHPATH}/favicon.ico`,\r\n  `${GHPATH}/icon.png`,\r\n  `${GHPATH}/tracky-mouse/lib/clmtrackr.js`,\r\n  `${GHPATH}/tracky-mouse/lib/stats.js`,\r\n  `${GHPATH}/tracky-mouse/lib/tf.js`,\r\n  `${GHPATH}/tracky-mouse/facemesh.worker.js`,\r\n  `${GHPATH}/tracky-mouse/lib/facemesh/facemesh.js`,\r\n  `${GHPATH}/tracky-mouse/lib/facemesh/facemesh/model.json`,\r\n  `${GHPATH}/tracky-mouse/lib/facemesh/facemesh/group1-shard1of1.bin`,\r\n  `${GHPATH}/tracky-mouse/lib/facemesh/blazeface/model.json`,\r\n  `${GHPATH}/tracky-mouse/lib/facemesh/blazeface/group1-shard1of1.bin`,\r\n];\r\n\r\nvar CACHE_NAME = APP_PREFIX + VERSION;\r\nself.addEventListener(\"fetch\", function (/** @type {FetchEvent} */ e) {\r\n  const url = new URL(e.request.url);\r\n  if (URLS.includes(url.pathname)) {\r\n    e.respondWith(\r\n      caches.match(e.request).then(function (request) {\r\n        if (request) {\r\n          return request;\r\n        } else {\r\n          return fetch(e.request);\r\n        }\r\n      }),\r\n    );\r\n  }\r\n});\r\n\r\nself.addEventListener(\"install\", function (/** @type {ExtendableEvent} */ e) {\r\n  e.waitUntil(\r\n    caches.open(CACHE_NAME).then(function (cache) {\r\n      return cache.addAll(URLS);\r\n    }),\r\n  );\r\n});\r\n\r\nself.addEventListener(\"activate\", function (/** @type {ExtendableEvent} */ e) {\r\n  e.waitUntil(\r\n    caches.keys().then(function (keyList) {\r\n      var cacheWhitelist = keyList.filter(function (key) {\r\n        return key.indexOf(APP_PREFIX);\r\n      });\r\n      cacheWhitelist.push(CACHE_NAME);\r\n      return Promise.all(\r\n        keyList.map(function (key, i) {\r\n          if (cacheWhitelist.indexOf(key) === -1) {\r\n            return caches.delete(keyList[i]);\r\n          }\r\n        }),\r\n      );\r\n    }),\r\n  );\r\n});\r\nself.addEventListener(\"message\", (/** @type {MessageEvent} */ event) => {\r\n  if (event.data === \"SKIP_WAITING\") {\r\n    /** @type {ServiceWorkerGlobalScope} */ (\r\n      /** @type {unknown} */ (self)\r\n    ).skipWaiting();\r\n  }\r\n});\r\n"],"names":[],"mappings":"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"}